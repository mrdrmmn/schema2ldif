dn: cn=samba,cn=schema,cn=config
objectClass: olcSchemaConfig
cn: samba
##
## schema file for OpenLDAP 2.0.x
## Schema for storing Samba's smbpasswd file in LDAP
## OIDs are owned by the Samba Team
##
## Prerequisite schemas - uid (cosine.schema)
##                      - displayName (inetorgperson.schema)
##
## 1.3.6.1.4.1.7165.2.1.x - attributetypes
## 1.3.6.1.4.1.7165.2.2.x - objectclasses
##
##
## Password hashes
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.1
  NAME 'lmPassword'
  DESC 'LanManager Passwd'
  EQUALITY caseIgnoreIA5Match
  SUBSTR caseIgnoreIA5SubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.2
  NAME 'ntPassword'
  DESC 'NT Passwd'
  EQUALITY caseIgnoreIA5Match
  SUBSTR caseIgnoreIA5SubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
##
## Account flags in string format ([UWDX     ])
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.4
  NAME 'acctFlags'
  DESC 'Account Flags'
  EQUALITY caseIgnoreIA5Match
  SUBSTR caseIgnoreIA5SubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
## 
## Password timestamps & policies
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.3
  NAME 'pwdLastSet'
  DESC 'NT pwdLastSet'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.5
  NAME 'logonTime'
  DESC 'NT logonTime'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.6
  NAME 'logoffTime'
  DESC 'NT logoffTime'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.7
  NAME 'kickoffTime'
  DESC 'NT kickoffTime'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.8
  NAME 'pwdCanChange'
  DESC 'NT pwdCanChange'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.9
  NAME 'pwdMustChange'
  DESC 'NT pwdMustChange'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
##
## string settings
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.10
  NAME 'homeDrive'
  DESC 'NT homeDrive'
  EQUALITY caseIgnoreIA5Match
  SUBSTR caseIgnoreIA5SubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.11
  NAME 'scriptPath'
  DESC 'NT scriptPath'
  EQUALITY caseIgnoreMatch
  SUBSTR caseIgnoreSubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.12
  NAME 'profilePath'
  DESC 'NT profilePath'
  EQUALITY caseIgnoreMatch
  SUBSTR caseIgnoreSubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.13
  NAME 'userWorkstations'
  DESC 'userWorkstations'
  EQUALITY caseIgnoreMatch
  SUBSTR caseIgnoreSubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.17
  NAME 'smbHome'
  DESC 'smbHome'
  EQUALITY caseIgnoreMatch
  SUBSTR caseIgnoreSubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.15 )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.18
  NAME 'domain'
  DESC 'Windows NT domain to which the user belongs'
  EQUALITY caseIgnoreIA5Match
  SUBSTR caseIgnoreIA5SubstringsMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26 )
##
## user and group RID
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.14
  NAME 'rid'
  DESC 'NT rid'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.15
  NAME 'primaryGroupID'
  DESC 'NT Group RID'
  EQUALITY integerMatch
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )
##
## The smbPasswordEntry objectclass has been depreciated in favor of the
## sambaAccount objectclass
##
#objectclass ( 1.3.6.1.4.1.7165.2.2.1 NAME 'smbPasswordEntry' SUP top AUXILIARY
#        DESC 'Samba smbpasswd entry'
#        MUST ( uid $ uidNumber )
#        MAY  ( lmPassword $ ntPassword $ pwdLastSet $ acctFlags ))
#objectclass ( 1.3.6.1.4.1.7165.2.2.2 NAME 'sambaAccount' SUP top STRUCTURAL
#	DESC 'Samba Account'
#	MUST ( uid $ rid ) 
#	MAY  ( cn $ lmPassword $ ntPassword $ pwdLastSet $ logonTime $
#               logoffTime $ kickoffTime $ pwdCanChange $ pwdMustChange $ acctFlags $ 
#               displayName $ smbHome $ homeDrive $ scriptPath $ profilePath $
#               description $ userWorkstations $ primaryGroupID $ domain ))
## The X.500 data model (and therefore LDAPv3) says that each entry can 
## only have one structural objectclass.  OpenLDAP 2.0 does not enforce 
## this currently but will in v2.1
olcObjectClasses: ( 1.3.6.1.4.1.7165.2.2.3
  NAME 'sambaAccount' SUP top AUXILIARY
  DESC 'Samba Auxilary Account'
  MUST ( uid $ rid ) 
  MAY  ( cn $ lmPassword $ ntPassword $ pwdLastSet $ logonTime $
  logoffTime $ kickoffTime $ pwdCanChange $ pwdMustChange $ acctFlags $ 
  displayName $ smbHome $ homeDrive $ scriptPath $ profilePath $
  description $ userWorkstations $ primaryGroupID $ domain ))
##
## Used for Winbind experimentation
##
#objectclass ( 1.3.6.1.4.1.7165.1.2.2.3 NAME 'uidPool' SUP top AUXILIARY
#	DESC 'Pool for allocating UNIX uids'
#	MUST ( uidNumber $ cn ) )
#objectclass ( 1.3.6.1.4.1.7165.1.2.2.4 NAME 'gidPool' SUP top AUXILIARY
#	DESC 'Pool for allocating UNIX gids'
#	MUST ( gidNumber $ cn ) )
##
## SID, of any type
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.20
  NAME 'sambaSID'
  DESC 'Security ID'
  EQUALITY caseIgnoreIA5Match
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{64} SINGLE-VALUE )
##
## Primary group SID, compatible with ntSid
##
olcAttributeTypes: ( 1.3.6.1.4.1.7165.2.1.23
  NAME 'sambaPrimaryGroupSID'
  DESC 'Primary Group Security ID'
  EQUALITY caseIgnoreIA5Match
  SYNTAX 1.3.6.1.4.1.1466.115.121.1.26{64} SINGLE-VALUE )
